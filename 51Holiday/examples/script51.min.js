function onEachFeature(e,r){var a="<p> "+e.properties.name+"</p>";e.properties&&e.properties.popupContent&&(a+=e.properties.popupContent),r.bindPopup(a)}var map=new L.Map("map",{zoom:6,minZoom:3}).setView([14.639081,101.4121505],5),tileUrl="http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",layer=new L.TileLayer(tileUrl,{attribution:'Maps Â© <a href="www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',maxZoom:18}),myTrip=[[1.3010655,103.8538013],[1.4618116,103.7615745],[3.1393364,101.5467663],[2.7512352,101.7089291],[25.1013443,102.9327304],[25.0439788,102.7157993],[24.7515023,103.1782069],[25.0700448,103.3500283],[25.0439788,102.7157993],[25.0513952,102.7011452],[25.0275218,102.6737143],[24.9617588,102.6634683],[25.0347297,102.7083859],[25.0439788,102.7157993],[25.0520444,102.703872],[25.0395304,102.7071431],[25.1013443,102.9327304],[2.7512352,101.7089291],[1.3644256,103.9893421]],greenIcon=L.icon({iconUrl:"me2.png",iconSize:[60,60]}),marker2=L.Marker.movingMarker(myTrip,[3e3,9e3,9e3,4e3,4e3,4e3,4e3,3e3,9e3,9e3,4e3,4e3,4e3,4e3,4e3,4e3,4e3,4e3],{autostart:!0});marker2.setIcon(greenIcon),L.polyline(myTrip,{color:"red"}).addTo(map),marker2.on("start",function(){marker2.bindPopup('<b>Welcome!  This is my 2016/5/1 Holiday !</b> <p>You can click each marker <img src="../js/images/marker-icon.png"  title="The fifth day" style=" width: 25px; height: 41px;"> to see the details. </P> ',{closeOnClick:!1}).openPopup(),setTimeout(function(){marker2.bindPopup("<b>Click me!! Click me !!</b>").openPopup()},1e4)}),marker2.on("end",function(){marker2.bindPopup("<b>2016/5/1 Holiday Done !</b>",{closeOnClick:!1}).openPopup()}),marker2.once("click",function(){marker2.start(),marker2.closePopup(),marker2.unbindPopup(),marker2.on("click",function(){marker2.isRunning()?marker2.pause():marker2.start()}),setTimeout(function(){marker2.bindPopup("<b>Click me!! Click me !!</b>").openPopup()},2e3)}),marker2.addTo(map);var sidebar=L.control.sidebar("sidebar",{closeButton:!0,position:"left"});map.addControl(sidebar);var overLayers=[{name:"The first day",layer:L.geoJson(firstdaylayer,{onEachFeature:onEachFeature,pointToLayer:function(e,r){var a=L.marker(r,{title:"The first day"});return a.on("click",function(e){$("#sidebar").html(this.feature.content),sidebar.toggle()}),a}}),group:"The first day",markertype:"dropdown",marker:{control:"accordioncheckbox",displayname:"Store"},active:!0,marker:!0},{name:"The second day",layer:L.geoJson(seconddaylayer,{onEachFeature:onEachFeature,pointToLayer:function(e,r){var a=L.marker(r,{title:"The second day"});return a.on("click",function(e){$("#sidebar").html(this.feature.content),sidebar.toggle()}),a}}),group:"The second day",markertype:"dropdown",marker:{control:"accordioncheckbox",displayname:"The second day"},active:!0,marker:!0},{name:"The third day",layer:L.geoJson(thirddaylayer,{onEachFeature:onEachFeature,pointToLayer:function(e,r){var a=L.marker(r,{title:"The third day"});return a.on("click",function(e){$("#sidebar").html(this.feature.content),sidebar.toggle()}),a}}),group:"The third day",markertype:"dropdown",marker:{control:"accordioncheckbox",displayname:"The third day"},active:!0,marker:!0},,{name:"The fourth day",layer:L.geoJson(fourthdaylayer,{onEachFeature:onEachFeature,pointToLayer:function(e,r){var a=L.marker(r,{title:"The fourth day"});return a.on("click",function(e){sidebar.hide(),$("#sidebar").html(this.feature.content),sidebar.toggle()}),a}}),group:"The fourth day",markertype:"dropdown",marker:{control:"accordioncheckbox",displayname:"The fourth day"},active:!0,marker:!0},{name:"The fifth day",layer:L.geoJson(fifthdaylayer,{onEachFeature:onEachFeature,pointToLayer:function(e,r){var a=L.marker(r,{title:"The fifth day"});return a.on("click",function(e){$("#sidebar").html(this.feature.content),sidebar.toggle()}),a}}),group:"The fifth day",markertype:"dropdown",marker:{control:"accordioncheckbox",displayname:"The fifth day"},active:!0,marker:!0}];map.on("click",function(){sidebar.hide()}),L.TileLayer.WebDogTileLayer=L.TileLayer.extend({getTileUrl:function(e){var r,a=this.options.getUrlArgs;if(a)var r=a(e);else r={z:e.z,x:e.x,y:e.y};return L.Util.template(this._url,L.extend(r,this.options,{s:this._getSubdomain(e)}))}}),L.tileLayer.webdogTileLayer=function(e,r){return new L.TileLayer.WebDogTileLayer(e,r)};var url="http://rt{s}.map.gtimg.com/realtimerender?z={z}&x={x}&y={y}&type=vector&style=0",options=L.extend({subdomain:"012"},{subdomains:"012",getUrlArgs:function(e){return{z:e.z,x:e.x,y:Math.pow(2,e.z)-1-e.y}}});L.tileLayer.webdogTileLayer(url,options);var baseLayers=[{name:"Open Street Map",layer:new L.TileLayer("http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"),active:!0},{name:"QQ Map",layer:new L.tileLayer.webdogTileLayer(url,options)}],panelLayers=new L.Control.PanelLayers(baseLayers,overLayers,null,null);map.addControl(panelLayers),function(e,r,a,t,o,n,i){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,n=r.createElement(a),i=r.getElementsByTagName(a)[0],n.async=1,n.src=t,i.parentNode.insertBefore(n,i)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-65211878-2","auto"),ga("send","pageview");
